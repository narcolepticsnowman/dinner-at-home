<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Menu</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css"/>
</head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/css/autoComplete.min.css">
<script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>

<body>
<script type="module">
    import {fnapp, fnbind, fnstate} from './fntags.js'
    import {div, img, style} from './fnelements.js'
    import MenuBoard from "./MenuBoard.js";
    import {authState, initFirebase, login} from "./firebase.js";
    import {colors} from "./constants.js";
    import settings from "./settings.js";

    const centeredBlock = (...children) => div(
        {
            style: {
                display: 'flex',
                'flex-direction': 'column',
                'align-items': 'center',
                height: '50vh',
                'justify-content': 'center'
            }
        },
        ...children
    )

    document.head.append(
        style(`
            body {
                background-image: url(./chalkboardBackground.jpg);
                background-position: center;
                background-size: cover;
                min-height: 100vh;
                font-family: radium;
            }
            @font-face {
                font-family: 'radium';
                src: url('radium.woff') format('woff');
            }
            button {
                background-color: grey;
                border-color: black;
                border-radius: 4px;
                padding: 10px;
                font-family: radium;
            }
        `)
    )

    fnapp(document.body,
        fnbind(authState, () =>
            authState.isLoaded ?
                authState.isAuthenticated ?
                    div(
                        {
                            style: {
                                margin: 'auto',
                                'align-items': 'center',
                                padding: '10px',
                                display: 'flex',
                                'flex-direction': 'column',
                                'max-width': '650px',
                                'text-align': 'center'
                            }
                        },
                        MenuBoard(),
                        settings
                    )
                    :
                    centeredBlock(
                        div({style: {'font-size': '4vh', color: colors.orange}}, "Menu Board"),
                        img({src: "./google_sign_in_btn.png", style: {cursor: 'pointer'}, onclick: ()=>login()})
                    )
                :
                centeredBlock(div({style: {'font-size': '4vh', color: colors.blue}}, "Loading..."))
        )
    )

    initFirebase()

</script>
</body>
</html>